apiVersion: v1
kind: Secret
metadata:
  name: {{ include "gretel-agent.secretName" . }}
  namespace: "{{ .Release.Namespace }}"
type: Opaque
stringData:
  GRETEL_API_KEY: {{ required ".Values.gretelConfig.apiKey must be set!" .Values.gretelConfig.apiKey }}
  GRETEL_ENDPOINT: "{{ .Values.gretelConfig.apiEndpoint }}"
  {{- with .Values.gretelConfig.workerEnv }}
    {{- toYaml . | nindent 2 }}
  {{- end }}
